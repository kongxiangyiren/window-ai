import{d as b,i as P,h as m,a as B,g,S as A,Y as x,C as L,V as N}from"./@matechat-DzxoojaY.js";/* empty css                      */import{i as I}from"./vue-devui-BSS2ZecR.js";import"./xss-EmsVGU1L.js";import"./cssfilter-BwiMAv7_.js";import"./lodash-es-CJ01Vb4c.js";import"./@vue-DWAnd_1e.js";import"./@floating-ui-DcVLvrRD.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function V(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=V(t);fetch(t.href,o)}})();const h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEhUlEQVR4nJ2WSyw7XxTHT7VjWjSIXRMLCxEiwaYhsbAgsUQkYkMiYmFRKzZsiJ1H/isWNiRYkAgJEZIuRCQiMol4K/WYPlAZ08cM2jtzf/nP+f/nPz/1+2udRdOZ9p7PeXzvuRdoahaLxR4eHk5OToLBIKV0bm7O5XL19vZubW1xHDcwMDA2NjY6Orq0tDQ1NTU+Pr6/v08pVRQFUgSoqipJ0sHBQTQapZS63W6Px8Nx3P39/fn5+ebm5uTk5F+a3d3dbW9v/wRAKb27u3t6eqKUhkIhr9dLKSWEHB4eqqq6u7t7eXm5t7fH8/zOzk44HMaFYFz/LYAQ8vr6io+yLEejUUEQMKdgMBgKhSilPp/v/PxcX/gP4OXlRZKkZKfPz8+iKAqC8Pj4iK6j0ajO+PTnRCIRi8X8fj8h5DeAIAinp6d+vz/xr4XDYfwMBoPLy8uBQMDj8RwdHVFKE4kEz/PIoJTG4/GXl5d4PI4/iaIYi8WM4L8Bx8fHPp+P47j5+fnr62uO49xu9/b29tHR0cXFxcbGxtXVVSgUkmVZD3xmZmZ+fh4BiqLIsixJkqqqhJBPmQEhRBRFSunr66vX6+V5/uLiAmstaKYoyvPzsyzL9/f3i4uLQ0NDXV1d2dnZFRUVkUgkEAj4fD6Xy9XS0sJxXHIv/1ORqqqiKF5fX2OkyR1uamoCgIyMDIvFYjabAWBrawsr7HQ6AcBqtba1taHMdNJvMpUk6ePj408qqq6uBgCGYViWtVqtAOB0OmVZ3tjYQCrDMACwsrKCevsC8CfXlNKPj4/y8nIAMJlMZrMZfQHAyMhIbW0tAJjN5pycHACYmJjAhqcHiMVixcXFCDCZTHqVsrOzMSeWZe12OwC4XK6fZCAIgsPhQAAAWCwWq2Ysy+bn59s0Q0B7ezsOifQAPM/n5uZik5GB381ms81my8rKYlk2Ly8PABobG43LvwcoWixnZ2csy2KTsTi6mUwmlmVNJlNWVhYA1NXVGSP7HkC0aq6urqI7RjMjQH+PEdTU1OCSVAEJTQ/Dw8MoFaOEjIa1AoCqqqq3t7c0AKphl1ksFpRpMgAAbDYby7IOh8Pn86UBULQedHd3Y5j/A2AYJiMjAwAWFhb02qbag76+Prvd7nQ6MzMzkwGoK7vd3tHRUVlZOTU1lQZA0TKYnZ1dX18nhJSVlaFAjQB8rKysVFX15uYGD7tUS4QWj8cjkQghpKKiIhmAGZSUlEiS9P7+/vnAScUIITzPezye0tLSPwHsdvvt7a0kSaii9ABU22vhcLi1tRW7rbvG/cwwjMPhuLy8jEQixoGfBkAUxUAg0NPTo2eAUw/3dkFBQWFhodvtFgTBOPNTAqhau/x+/9raWmdnpzED3SwWCwAMDg6+v7+rmqWdQSKR8Hq9OLQ/9UBHNjQ0oOrSBhBNGAsLC196118WFxfj9eeHgFVt5OnjOhlQVVWFV5i0AYqW+NXVFU60ZAaWqLm5+dOdLL27aTQaLSoq+rJK2OT+/n7jeZk2gFJaX1+vx2scfPhlenraeOJTSn8BTTVc7TLmYLwAAAAASUVORK5CYII=",M={class:"shortcut",style:{display:"flex","align-items":"center",gap:"8px"}},q={class:"input-foot-wrapper"},j={class:"input-foot-left"},E={class:"input-foot-maxlength"},O={class:"input-foot-right"},S=Vue.defineComponent({__name:"App",setup(w){function s(){window.open("https://github.com/kongxiangyiren/window-ai","_blank","noopener noreferrer")}const V=["window-AI 使用 chrome 提供的浏览器 AI 功能","详情查看: https://github.com/kongxiangyiren/window-ai"],c={direction:"horizontal",list:[{value:"quickSort",label:"帮我写一个快速排序",iconConfig:{name:"icon-info-o",color:"#5e7ce0"},desc:"使用 js 实现一个快速排序"},{value:"helpMd",label:"你可以帮我做些什么？",iconConfig:{name:"icon-star",color:"rgb(255, 215, 0)"},desc:"了解当前大模型可以帮你做的事"},{value:"bindProjectSpace",label:"介绍一下自己",iconConfig:{name:"icon-priority",color:"#3ac295"},desc:"介绍一下自己"}]},t=[{value:"quickSort",iconConfig:{name:"icon-info-o",color:"#5e7ce0"},label:"帮我写一个快速排序"},{value:"helpMd",iconConfig:{name:"icon-star",color:"rgb(255, 215, 0)"},label:"你可以帮我做些什么？"}],o=Vue.ref(!0),i=Vue.ref(""),r=Vue.ref([]),y=()=>{o.value=!0,r.value=[],d.destroy(),u.destroy(),u=void 0,d=void 0},f=a=>{i.value="",o.value=!1,r.value.push({role:"user",content:a}),C(a)};let u;async function k(){if(!("LanguageModel"in self))return alert("The Translator API is not supported in this browser."),!1;const a=await LanguageModel.availability();if(a==="unavailable")return alert("The Translator API is not available in this browser."),!1;a==="available"?u=await LanguageModel.create({systemPrompt:"用中文回答"}):u=await LanguageModel.create({systemPrompt:"用中文回答",monitor(e){e.addEventListener("downloadprogress",n=>{console.log(`Downloaded ${n.loaded} of ${n.total} bytes.`)})}})}let d;const p=Vue.ref();async function C(a){if(r.value.push({role:"assistant",content:"",loading:!0}),!u&&!await k())return r.value=[],o.value=!0;d||(d=await u.clone());const e=d.promptStreaming(a);r.value[r.value.length-1].loading=!1;for await(const n of e){const l=p.value.$el;console.log(l.scrollTop,l.scrollHeight-l.clientHeight),l.scrollTop<=l.scrollHeight-l.clientHeight&&(l.scrollTop=l.scrollHeight),r.value[r.value.length-1].content+=n}}return(a,e)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(b),{class:"container"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(P),{title:"window-AI",logoImg:Vue.unref(h)},{operationArea:Vue.withCtx(()=>[Vue.createElementVNode("div",{class:"operations",style:{cursor:"pointer"},onClick:s},e[4]||(e[4]=[Vue.createElementVNode("i",{class:"icon-helping"},null,-1)]))]),_:1},8,["logoImg"]),o.value?(Vue.openBlock(),Vue.createBlock(Vue.unref(m),{key:0,style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",gap:"12px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(B),{logoImg:Vue.unref(h),title:"window-AI",subTitle:"Hi，欢迎使用 window-AI",description:V},null,8,["logoImg"]),Vue.createVNode(Vue.unref(g),{list:c.list,direction:c.direction,class:"intro-prompt",onItemClick:e[0]||(e[0]=n=>f(n.label))},null,8,["list","direction"])]),_:1})):(Vue.openBlock(),Vue.createBlock(Vue.unref(m),{key:1,class:"content-container",ref_key:"contentContainer",ref:p},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(r.value,(n,l)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:l},[n.role==="user"?(Vue.openBlock(),Vue.createBlock(Vue.unref(A),{key:0,content:n.content,align:"right",avatarConfig:{imgSrc:"https://matechat.gitcode.com/png/demo/userAvatar.svg"}},null,8,["content"])):(Vue.openBlock(),Vue.createBlock(Vue.unref(A),{key:1,loading:n.loading??!1,avatarConfig:{imgSrc:"https://matechat.gitcode.com/logo.svg"}},{bottom:Vue.withCtx(()=>e[5]||(e[5]=[Vue.createElementVNode("div",{class:"bubble-bottom-operations"},[Vue.createElementVNode("i",{class:"icon-copy-new"}),Vue.createElementVNode("i",{class:"icon-like"}),Vue.createElementVNode("i",{class:"icon-dislike"})],-1)])),default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(x),{content:n.content},null,8,["content"])]),_:2},1032,["loading"]))],64))),128))]),_:1},512)),Vue.createElementVNode("div",M,[o.value?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(Vue.unref(g),{key:0,list:t,direction:"horizontal",style:{flex:"1"},onItemClick:e[1]||(e[1]=n=>f(n.label))})),Vue.createVNode(Vue.unref(VueDevui.Button),{style:{"margin-left":"auto"},icon:"add",shape:"circle",title:"新建对话",size:"md",onClick:y})]),Vue.createVNode(Vue.unref(L),null,{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(N),{value:i.value,maxLength:2e3,onChange:e[3]||(e[3]=n=>i.value=n),onSubmit:f},{extra:Vue.withCtx(()=>[Vue.createElementVNode("div",q,[Vue.createElementVNode("div",j,[Vue.createElementVNode("span",E,Vue.toDisplayString(i.value.length)+"/2000",1)]),Vue.createElementVNode("div",O,[Vue.createVNode(Vue.unref(VueDevui.Button),{icon:"op-clearup",shape:"round",disabled:!i.value,onClick:e[2]||(e[2]=n=>i.value="")},{default:Vue.withCtx(()=>e[6]||(e[6]=[Vue.createElementVNode("span",{class:"demo-button-content"},"清空输入",-1)])),_:1,__:[6]},8,["disabled"])])])]),_:1},8,["value"])]),_:1})]),_:1}))}}),v=Vue.createApp(S);v.use(I);v.mount("#app");
